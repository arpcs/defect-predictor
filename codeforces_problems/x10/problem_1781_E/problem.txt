{
    "contestId": 1781,
    "index": "E",
    "name": "Rectangle Shrinking",
    "type": "PROGRAMMING",
    "points": 2750.0,
    "rating": 2300,
    "tags": [
        "binary search",
        "brute force",
        "data structures",
        "greedy",
        "implementation",
        "two pointers"
    ],
    "desc": {
        "title": "E. Rectangle Shrinking",
        "statement": "<p>You have a rectangular grid of height $$$2$$$ and width $$$10^9$$$ consisting of unit cells. There are $$$n$$$ rectangles placed on this grid, and the borders of these rectangles pass along cell borders. The $$$i$$$-th rectangle covers all cells in rows from $$$u_i$$$ to $$$d_i$$$ inclusive and columns from $$$l_i$$$ to $$$r_i$$$ inclusive ($$$1 \\le u_i \\le d_i \\le 2$$$; $$$1 \\le l_i \\le r_i \\le 10^9$$$). The initial rectangles can intersect, be nested, and coincide arbitrarily.</p><p>You should either remove each rectangle, or replace it with any of its non-empty subrectangles. In the latter case, the new subrectangle must lie inside the initial rectangle, and its borders must still pass along cell borders. In particular, it is allowed for the subrectangle to be equal to the initial rectangle.</p><p>After that replacement, no two (non-removed) rectangles are allowed to have common cells, and the total area covered with the new rectangles must be as large as possible.</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/bd929fd8768d39a836cfaed89c2f65cd066c46ae.png\" style=\"max-width: 100.0%;max-height: 100.0%;\" width=\"756px\"/> <span class=\"tex-font-size-small\">Illustration for the first test case. The initial rectangles are given at the top, the new rectangles are given at the bottom. Rectangle number $$$4$$$ is removed.</span> </center>",
        "inputSpecification": "<p>Each test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \\le t \\le 10^4$$$). The description of the test cases follows.</p><p>The first line of each test case contains a single integer $$$n$$$\u00a0($$$1 \\le n \\le 2 \\cdot 10^5$$$)\u00a0\u2014 the number of rectangles.</p><p>Each of the next $$$n$$$ lines contains four integers $$$u_i, l_i, d_i, r_i$$$\u00a0($$$1 \\le u_i \\le d_i \\le 2$$$; $$$1 \\le l_i \\le r_i \\le 10^9$$$)\u00a0\u2014 the coordinates of cells located in the top-left and the bottom-right corners of the rectangle, respectively.</p><p>It is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$2 \\cdot 10^5$$$.</p>",
        "outputSpecification": "<p>For each test case, first print an integer $$$s$$$\u00a0\u2014 the largest possible covered by new rectangles area. Then print $$$n$$$ lines with your solution to cover this area.</p><p>In the $$$i$$$-th of these lines print four integers $$$u'_i, l'_i, d'_i, r'_i$$$. If you remove the $$$i$$$-th rectangle, print $$$u'_i = l'_i = d'_i = r'_i = 0$$$. Otherwise, these numbers denote the new coordinates of the top-left and the bottom-right corners of the $$$i$$$-th rectangle, satisfying $$$u_i \\le u'_i \\le d'_i \\le d_i$$$; $$$l_i \\le l'_i \\le r'_i \\le r_i$$$.</p><p>If there are multiple solutions, print any.</p>",
        "samples": [
            {
                "input": "<div class=\"test-example-line test-example-line-even test-example-line-0\">8</div><div class=\"test-example-line test-example-line-odd test-example-line-1\">5</div><div class=\"test-example-line test-example-line-odd test-example-line-1\">1 2 2 4</div><div class=\"test-example-line test-example-line-odd test-example-line-1\">2 4 2 8</div><div class=\"test-example-line test-example-line-odd test-example-line-1\">1 4 2 7</div><div class=\"test-example-line test-example-line-odd test-example-line-1\">1 2 1 2</div><div class=\"test-example-line test-example-line-odd test-example-line-1\">1 9 1 10</div><div class=\"test-example-line test-example-line-even test-example-line-2\">2</div><div class=\"test-example-line test-example-line-even test-example-line-2\">1 1 1 10</div><div class=\"test-example-line test-example-line-even test-example-line-2\">1 5 1 15</div><div class=\"test-example-line test-example-line-odd test-example-line-3\">2</div><div class=\"test-example-line test-example-line-odd test-example-line-3\">1 1 1 10</div><div class=\"test-example-line test-example-line-odd test-example-line-3\">1 1 1 10</div><div class=\"test-example-line test-example-line-even test-example-line-4\">5</div><div class=\"test-example-line test-example-line-even test-example-line-4\">1 3 1 7</div><div class=\"test-example-line test-example-line-even test-example-line-4\">1 3 1 8</div><div class=\"test-example-line test-example-line-even test-example-line-4\">1 1 1 4</div><div class=\"test-example-line test-example-line-even test-example-line-4\">1 2 1 7</div><div class=\"test-example-line test-example-line-even test-example-line-4\">1 10 1 11</div><div class=\"test-example-line test-example-line-odd test-example-line-5\">2</div><div class=\"test-example-line test-example-line-odd test-example-line-5\">1 1 2 10</div><div class=\"test-example-line test-example-line-odd test-example-line-5\">1 5 1 8</div><div class=\"test-example-line test-example-line-even test-example-line-6\">2</div><div class=\"test-example-line test-example-line-even test-example-line-6\">1 5 2 10</div><div class=\"test-example-line test-example-line-even test-example-line-6\">1 2 1 7</div><div class=\"test-example-line test-example-line-odd test-example-line-7\">2</div><div class=\"test-example-line test-example-line-odd test-example-line-7\">1 5 2 10</div><div class=\"test-example-line test-example-line-odd test-example-line-7\">2 2 2 15</div><div class=\"test-example-line test-example-line-even test-example-line-8\">5</div><div class=\"test-example-line test-example-line-even test-example-line-8\">2 6 2 7</div><div class=\"test-example-line test-example-line-even test-example-line-8\">1 4 2 5</div><div class=\"test-example-line test-example-line-even test-example-line-8\">1 5 1 9</div><div class=\"test-example-line test-example-line-even test-example-line-8\">1 7 2 10</div><div class=\"test-example-line test-example-line-even test-example-line-8\">1 2 1 6</div>",
                "output": "\n15\n1 2 2 4\n2 5 2 8\n1 5 1 7\n0 0 0 0\n1 9 1 10\n15\n1 1 1 10\n1 11 1 15\n10\n1 1 1 10\n0 0 0 0\n10\n0 0 0 0\n1 8 1 8\n1 1 1 4\n1 5 1 7\n1 10 1 11\n20\n1 1 2 10\n0 0 0 0\n15\n1 5 2 10\n1 2 1 4\n20\n1 5 1 10\n2 2 2 15\n16\n2 6 2 6\n2 4 2 5\n0 0 0 0\n1 7 2 10\n1 2 1 6\n"
            }
        ],
        "note": "<p>The picture in the statement illustrates the first test case.</p>"
    }
}