{
    "id": 222185402,
    "contestId": 1584,
    "creationTimeSeconds": 1694081023,
    "relativeTimeSeconds": 2147483647,
    "problem": {
        "contestId": 1584,
        "index": "E",
        "name": "Game with Stones",
        "type": "PROGRAMMING",
        "points": 2000.0,
        "rating": 2300,
        "tags": [
            "binary search",
            "data structures",
            "games",
            "greedy"
        ]
    },
    "author": {
        "contestId": 1584,
        "members": [
            {
                "handle": "maspy"
            }
        ],
        "participantType": "PRACTICE",
        "ghost": false,
        "startTimeSeconds": 1636869900
    },
    "programmingLanguage": "GNU C++20 (64)",
    "verdict": "OK",
    "testset": "TESTS",
    "passedTestCount": 41,
    "timeConsumedMillis": 155,
    "memoryConsumedBytes": 21811200,
    "source": "#line 2 \"/home/maspy/library/my_template.hpp\"\r\n#include <bits/stdc++.h>\r\n\r\nusing namespace std;\r\n\r\nusing ll = long long;\r\nusing ll8 = __int128;\r\nusing ld = long double;\r\nusing pi = pair<ll, ll>;\r\nusing vi = vector<ll>;\r\ntemplate <class T> using vc = vector<T>;\r\ntemplate <class T> using vvc = vector<vc<T>>;\r\ntemplate <class T> using vvvc = vector<vvc<T>>;\r\ntemplate <class T> using vvvvc = vector<vvvc<T>>;\r\ntemplate <class T> using vvvvvc = vector<vvvvc<T>>;\r\ntemplate <class T> using pq = priority_queue<T>;\r\ntemplate <class T> using pqg = priority_queue<T, vector<T>, greater<T>>;\r\n\r\n#define vec(type, name, ...) vector<type> name(__VA_ARGS__)\r\n#define VEC(type, name, size)                                                                                                                                  \\\r\n    vector<type> name(size);                                                                                                                                   \\\r\n    IN(name)\r\n#define vv(type, name, h, ...) vector<vector<type>> name(h, vector<type>(__VA_ARGS__))\r\n#define VV(type, name, h, w)                                                                                                                                   \\\r\n    vector<vector<type>> name(h, vector<type>(w));                                                                                                             \\\r\n    IN(name)\r\n#define vvv(type, name, h, w, ...) vector<vector<vector<type>>> name(h, vector<vector<type>>(w, vector<type>(__VA_ARGS__)))\r\n#define vvvv(type, name, a, b, c, ...)                                                                                                                         \\\r\n    vector<vector<vector<vector<type>>>> name(a, vector<vector<vector<type>>>(b, vector<vector<type>>(c, vector<type>(__VA_ARGS__))))\r\n\r\n#define FOR(i, n) for (ll i = 0; (i) < (ll)(n); ++(i))\r\n#define FOR3(i, m, n) for (ll i = (m); (i) < (ll)(n); ++(i))\r\n#define FOR_R(i, n) for (ll i = (ll)(n)-1; (i) >= 0; --(i))\r\n#define FOR3_R(i, m, n) for (ll i = (ll)(n)-1; (i) >= (ll)(m); --(i))\r\n#define FORIN(x, A) for (auto&& x : A)\r\n#define FOR_nCk(s, n, k) \\\r\n  for (ll s = (1 << k) - 1, tmp_var = 0; s < (1 << n); \\\r\n  tmp_var = s | (s - 1), s = (tmp_var + 1) | (((~tmp_var & -~tmp_var) - 1) >> (__builtin_ctz(s) + 1))) \r\n#define FOR_SUB(t, s) for(ll t = s; t >= 0; t = (t==0 ? -1 : (t - 1) & s))\r\n#define all(x) x.begin(), x.end()\r\n\r\n#define elif else if\r\n\r\nusing ull = unsigned long long;\r\nusing uint = unsigned int;\r\nint popcnt(uint x) {\r\n  return __builtin_popcount(x);\r\n}\r\nint popcnt(int x) {\r\n  return __builtin_popcount(x);\r\n}\r\nint popcnt(ull x) {\r\n  return __builtin_popcountll(x);\r\n}\r\nint popcnt(ll x) {\r\n  return __builtin_popcountll(x);\r\n}\r\nint bsr(uint x) {\r\n  return 31 - __builtin_clz(x);\r\n}\r\nint bsr(ull x) {\r\n  return 63 - __builtin_clzll(x);\r\n}\r\nint bsf(uint x) {\r\n  return __builtin_ctz(x);\r\n}\r\nint bsf(ull x) {\r\n  return __builtin_ctzll(x);\r\n}\r\n\r\n#define eb emplace_back\r\n#define mp make_pair\r\n#define mt make_tuple\r\n#define fi first\r\n#define se second\r\n\r\n#define SUM(v) accumulate(all(v), 0LL)\r\n#define MIN(v) *min_element(all(v))\r\n#define MAX(v) *max_element(all(v))\r\n\r\n#define LB(c, x) distance((c).begin(), lower_bound(all(c), (x)))\r\n#define UB(c, x) distance((c).begin(), upper_bound(all(c), (x)))\r\n#define UNIQUE(x) sort(all(x)), x.erase(unique(all(x)), x.end())\r\n\r\ntemplate <class T> T ceil(T x, T y) {\r\n    assert(y >= 1);\r\n    return (x > 0 ? (x + y - 1) / y : x / y);\r\n}\r\n\r\ntemplate <class T> T floor(T x, T y) {\r\n    assert(y >= 1);\r\n    return (x > 0 ? x / y : (x - y + 1) / y);\r\n}\r\n\r\n#define INT(...) \\\r\n  int __VA_ARGS__; \\\r\n  IN(__VA_ARGS__)\r\n#define LL(...) \\\r\n  ll __VA_ARGS__; \\\r\n  IN(__VA_ARGS__)\r\n#define STR(...) \\\r\n  string __VA_ARGS__; \\\r\n  IN(__VA_ARGS__)\r\n#define CHR(...) \\\r\n  char __VA_ARGS__; \\\r\n  IN(__VA_ARGS__)\r\n#define DBL(...) \\\r\n  long double __VA_ARGS__; \\\r\n  IN(__VA_ARGS__)\r\nvoid scan(int &a) { cin >> a; }\r\nvoid scan(long long &a) { cin >> a; }\r\nvoid scan(char &a) { cin >> a; }\r\nvoid scan(double &a) { cin >> a; }\r\nvoid scan(long double &a) { cin >> a; }\r\nvoid scan(string &a) { cin >> a; }\r\ntemplate <class T, class S> void scan(pair<T, S> &p) { scan(p.first), scan(p.second); }\r\ntemplate <class T> void scan(vector<T> &a) {for(auto &i : a) scan(i);}\r\ntemplate <class T> void scan(T &a) { cin >> a; }\r\nvoid IN() {}\r\ntemplate <class Head, class... Tail> void IN(Head &head, Tail &...tail) {\r\n  scan(head);\r\n  IN(tail...);\r\n}\r\n\r\nll isqrt(ll n) {\r\n  ll x = n, y = (n + 1) / 2;\r\n  while (y < x) { tie(x, y) = mp(y, (y + n / y) / 2); }\r\n  return x;\r\n}\r\n\r\nvi s_to_vi(string S, char first_char='a'){\r\n  vi A(S.size());\r\n  FOR(i, S.size()){\r\n    A[i] = S[i] - first_char;\r\n  }\r\n  return A;\r\n}\r\n\r\ntemplate <typename T, typename U>\r\nostream& operator<<(ostream& os, const pair<T, U>& A) {\r\n  os << A.fi << \" \" << A.se;\r\n  return os;\r\n}\r\n\r\ntemplate <typename T>\r\nostream& operator<<(ostream& os, const vector<T>& A) {\r\n  for (size_t i = 0; i < A.size(); i++) {\r\n    if(i) os << \" \";\r\n    os << A[i];\r\n  }\r\n  return os;\r\n}\r\n\r\nvoid print() {\r\n  cout << \"\\n\";\r\n}\r\n\r\ntemplate <class Head, class... Tail>\r\nvoid print(Head&& head, Tail&&... tail) {\r\n  cout << head;\r\n  if (sizeof...(Tail)) cout << \" \";\r\n  print(forward<Tail>(tail)...);\r\n}\r\n\r\nconst string YESNO[2] = {\"NO\", \"YES\"};\r\nconst string YesNo[2] = {\"No\", \"Yes\"};\r\nconst string yesno[2] = {\"no\", \"yes\"};\r\nvoid YES(bool t = 1) { cout << YESNO[t] << endl; }\r\nvoid NO(bool t = 1) { YES(!t); }\r\nvoid Yes(bool t = 1) { cout << YesNo[t] << endl; }\r\nvoid No(bool t = 1) { Yes(!t); }\r\nvoid yes(bool t = 1) { cout << yesno[t] << endl; }\r\nvoid no(bool t = 1) { yes(!t); }\r\n\r\ntemplate <typename T>\r\nvector<T> cumsum(vector<T> A) {\r\n  ll N = A.size();\r\n  vector<T> B(N + 1);\r\n  B[0] = T(0);\r\n  FOR(i, N) { B[i + 1] = B[i] + A[i]; }\r\n  return B;\r\n}\r\n\r\nvi bin_count(vi& A, ll size) {\r\n  vi C(size);\r\n  for (auto&& x : A) {\r\n    ++C[x];\r\n  }\r\n  return C;\r\n}\r\n\r\ntemplate <typename T>\r\nvi argsort(vector<T>& A){\r\n  vi ids(A.size());\r\n  iota(all(ids), 0);\r\n  sort(all(ids), [&](ll i, ll j){\r\n    return A[i] < A[j] || (A[i] == A[j] && i < j);\r\n  });\r\n  return ids;\r\n}\r\n\r\nll binary_search(function<bool(ll)> check, ll ok, ll ng) {\r\n  while (abs(ok - ng) > 1) {\r\n    auto x = (ng + ok) / 2;\r\n    if (check(x))\r\n      ok = x;\r\n    else\r\n      ng = x;\r\n  }\r\n  return ok;\r\n}\r\n\r\ntemplate <class T, class S> inline bool chmax(T &a, const S &b) { return (a < b ? a = b, 1 : 0); }\r\ntemplate <class T, class S> inline bool chmin(T &a, const S &b) { return (a > b ? a = b, 1 : 0); }\r\n\r\ntemplate <typename T>\r\nvc<T> merge_sort(vc<T>& A, vc<T>& B) {\r\n  vc<T> C;\r\n  C.reserve(A.size() + B.size());\r\n  merge(all(A), all(B), back_inserter(C));\r\n  return C;\r\n}\r\n#line 2 \"main.cpp\"\r\n\r\n#line 2 \"/home/maspy/library/ds/lazysegtree.hpp\"\r\n\r\ntemplate <typename T,typename E>\r\nstruct SegmentTree{\r\n  using F = function<T(T,T)>;\r\n  using G = function<T(T,E)>;\r\n  using H = function<E(E,E)>;\r\n  int n,height;\r\n  F f;\r\n  G g;\r\n  H h;\r\n  T ti;\r\n  E ei;\r\n  vector<T> dat;\r\n  vector<E> laz;\r\n  SegmentTree(F f,G g,H h,T ti,E ei):\r\n    f(f),g(g),h(h),ti(ti),ei(ei){}\r\n\r\n  void init(int n_){\r\n    n=1;height=0;\r\n    while(n<n_) n<<=1,height++;\r\n    dat.assign(2*n,ti);\r\n    laz.assign(2*n,ei);\r\n  }\r\n\r\n  void build(const vector<T> &v){\r\n    int n_=v.size();\r\n    init(n_);\r\n    for(int i=0;i<n_;i++) dat[n+i]=v[i];\r\n    for(int i=n-1;i;i--)\r\n      dat[i]=f(dat[(i<<1)|0],dat[(i<<1)|1]);\r\n  }\r\n\r\n  inline T reflect(int k){\r\n    return laz[k]==ei?dat[k]:g(dat[k],laz[k]);\r\n  }\r\n\r\n  inline void propagate(int k){\r\n    if(laz[k]==ei) return;\r\n    laz[(k<<1)|0]=h(laz[(k<<1)|0],laz[k]);\r\n    laz[(k<<1)|1]=h(laz[(k<<1)|1],laz[k]);\r\n    dat[k]=reflect(k);\r\n    laz[k]=ei;\r\n  }\r\n\r\n  inline void thrust(int k){\r\n    for(int i=height;i;i--) propagate(k>>i);\r\n  }\r\n\r\n  inline void recalc(int k){\r\n    while(k>>=1)\r\n      dat[k]=f(reflect((k<<1)|0),reflect((k<<1)|1));\r\n  }\r\n\r\n  void operate_range(int a,int b,E x){\r\n    if(a>=b) return;\r\n    thrust(a+=n);\r\n    thrust(b+=n-1);\r\n    for(int l=a,r=b+1;l<r;l>>=1,r>>=1){\r\n      if(l&1) laz[l]=h(laz[l],x),l++;\r\n      if(r&1) --r,laz[r]=h(laz[r],x);\r\n    }\r\n    recalc(a);\r\n    recalc(b);\r\n  }\r\n\r\n  void set(int a,T x){\r\n    thrust(a+=n);\r\n    dat[a]=x;laz[a]=ei;\r\n    recalc(a);\r\n  }\r\n\r\n  T fold(int a,int b){\r\n    if(a>=b) return ti;\r\n    thrust(a+=n);\r\n    thrust(b+=n-1);\r\n    T vl=ti,vr=ti;\r\n    for(int l=a,r=b+1;l<r;l>>=1,r>>=1) {\r\n      if(l&1) vl=f(vl,reflect(l++));\r\n      if(r&1) vr=f(reflect(--r),vr);\r\n    }\r\n    return f(vl,vr);\r\n  }\r\n\r\n  template<typename C>\r\n  int find(int st,C &check,T &acc,int k,int l,int r){\r\n    if(l+1==r){\r\n      acc=f(acc,reflect(k));\r\n      return check(acc)?k-n:-1;\r\n    }\r\n    propagate(k);\r\n    int m=(l+r)>>1;\r\n    if(m<=st) return find(st,check,acc,(k<<1)|1,m,r);\r\n    if(st<=l and !check(f(acc,dat[k]))){\r\n      acc=f(acc,dat[k]);\r\n      return -1;\r\n    }\r\n    int vl=find(st,check,acc,(k<<1)|0,l,m);\r\n    if(~vl) return vl;\r\n    return find(st,check,acc,(k<<1)|1,m,r);\r\n  }\r\n\r\n  template<typename C>\r\n  int find(int st,C &check){\r\n    T acc=ti;\r\n    return find(st,check,acc,1,0,n);\r\n  }\r\n};\r\n#line 4 \"main.cpp\"\r\n\r\nvoid solve() {\r\n  LL(N);\r\n  VEC(ll, A, N);\r\n  ll ANS = 0;\r\n\r\n  map<ll, ll> ss;\r\n  /*\r\n  set \u306b\u5165\u3063\u3066\u3044\u308b\u3082\u306e\u304c x \u3068\u3059\u308b\u3068\u304d\u3001px+q \u304c\u672c\u5f53\u306e\u8981\u7d20\r\n  */\r\n  ll p = 1, q = 0;\r\n\r\n  FORIN(a, A) {\r\n    tie(p, q) = mp(-p, a - q);\r\n    ss[(a - q) / p]++;\r\n\r\n    if (p == 1) {\r\n      while (!ss.empty()) {\r\n        auto it = ss.begin();\r\n        ll key = (*it).fi;\r\n        if (key + q < 0)\r\n          ss.erase(it);\r\n        else\r\n          break;\r\n      }\r\n    }\r\n    if (p == -1) {\r\n      while (!ss.empty()) {\r\n        auto it = ss.end();\r\n        --it;\r\n        ll key = (*it).fi;\r\n        if (-key + q < 0)\r\n          ss.erase(it);\r\n        else\r\n          break;\r\n      }\r\n    }\r\n    ll x = (0 - q) / p;\r\n    if (ss.count(x)) ANS += ss[x];\r\n  }\r\n  print(ANS);\r\n}\r\n\r\nsigned main() {\r\n  cin.tie(nullptr);\r\n  ios::sync_with_stdio(false);\r\n  cout << setprecision(15);\r\n\r\n  LL(T);\r\n  FOR(_, T) solve();\r\n\r\n  return 0;\r\n}"
}