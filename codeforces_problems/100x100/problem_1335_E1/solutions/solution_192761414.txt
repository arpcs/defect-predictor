{
    "id": 192761414,
    "contestId": 1335,
    "creationTimeSeconds": 1675872530,
    "relativeTimeSeconds": 2147483647,
    "problem": {
        "contestId": 1335,
        "index": "E1",
        "name": "Three Blocks Palindrome (easy version)",
        "type": "PROGRAMMING",
        "rating": 1700,
        "tags": [
            "binary search",
            "brute force",
            "data structures",
            "dp",
            "two pointers"
        ]
    },
    "author": {
        "contestId": 1335,
        "members": [
            {
                "handle": "my_god"
            }
        ],
        "participantType": "PRACTICE",
        "ghost": false,
        "startTimeSeconds": 1586788500
    },
    "programmingLanguage": "GNU C++20 (64)",
    "verdict": "OK",
    "testset": "TESTS",
    "passedTestCount": 39,
    "timeConsumedMillis": 77,
    "memoryConsumedBytes": 1228800,
    "source": "#include \"bits/stdc++.h\"\r\n#pragma GCC optimize (\"O3\")\r\n#pragma GCC target (\"sse4\")\r\n \r\nusing namespace std;\r\n \r\ntypedef long long ll;\r\ntypedef long double ld;\r\ntypedef complex<ld> cd;\r\n \r\ntypedef pair<int, int> pi;\r\ntypedef pair<ll,ll> pl;\r\ntypedef pair<ld,ld> pd;\r\n \r\ntypedef vector<int> vi;\r\ntypedef vector<ld> vd;\r\ntypedef vector<ll> vl;\r\ntypedef vector<pi> vpi;\r\ntypedef vector<pl> vpl;\r\ntypedef vector<cd> vcd;\r\n \r\ntemplate<class T> using pq = priority_queue<T>;\r\ntemplate<class T> using pqg = priority_queue<T, vector<T>, greater<T>>;\r\n \r\n#define FOR(i, a, b) for (ll i=a; i<(b); i++)\r\n#define F0R(i, a) for (ll i=0; i<(a); i++)\r\n#define FORd(i,a,b) for (ll i = (b)-1; i >= a; i--)\r\n#define F0Rd(i,a) for (ll i = (a)-1; i >= 0; i--)\r\n#define trav(a,x) for (auto& a : x)\r\n#define uid(a, b) uniform_int_distribution<int>(a, b)(rng)\r\n \r\n#define sz(x) (int)(x).size()\r\n#define mp make_pair\r\n#define pb push_back\r\n#define f first\r\n#define s second\r\n#define lb lower_bound\r\n#define ub upper_bound\r\n#define all(x) x.begin(), x.end()\r\n#define ins insert\r\n \r\ntemplate<class T> bool ckmin(T& a, const T& b) { return b < a ? a = b, 1 : 0; }\r\ntemplate<class T> bool ckmax(T& a, const T& b) { return a < b ? a = b, 1 : 0; }\r\n \r\nmt19937 rng(chrono::steady_clock::now().time_since_epoch().count());\r\n \r\nvoid __print(int x) {cerr << x;}\r\nvoid __print(long x) {cerr << x;}\r\nvoid __print(long long x) {cerr << x;}\r\nvoid __print(unsigned x) {cerr << x;}\r\nvoid __print(unsigned long x) {cerr << x;}\r\nvoid __print(unsigned long long x) {cerr << x;}\r\nvoid __print(float x) {cerr << x;}\r\nvoid __print(double x) {cerr << x;}\r\nvoid __print(long double x) {cerr << x;}\r\nvoid __print(char x) {cerr << '\\'' << x << '\\'';}\r\nvoid __print(const char *x) {cerr << '\\\"' << x << '\\\"';}\r\nvoid __print(const string &x) {cerr << '\\\"' << x << '\\\"';}\r\nvoid __print(bool x) {cerr << (x ? \"true\" : \"false\");}\r\n \r\ntemplate<typename T, typename V>\r\nvoid __print(const pair<T, V> &x) {cerr << '{'; __print(x.first); cerr << \", \"; __print(x.second); cerr << '}';}\r\ntemplate<typename T>\r\nvoid __print(const T &x) {int f = 0; cerr << '{'; for (auto &i: x) cerr << (f++ ? \", \" : \"\"), __print(i); cerr << \"}\";}\r\nvoid _print() {cerr << \"]\\n\";}\r\ntemplate <typename T, typename... V>\r\nvoid _print(T t, V... v) {__print(t); if (sizeof...(v)) cerr << \", \"; _print(v...);}\r\n#ifdef DEBUG\r\n#define dbg(x...) cerr << \"\\e[91m\"<<__func__<<\":\"<<__LINE__<<\" [\" << #x << \"] = [\"; _print(x); cerr << \"\\e[39m\" << endl;\r\n#else\r\n#define dbg(x...)\r\n#endif\r\n \r\n \r\nconst int MOD = 1000000007;\r\nconst char nl = '\\n';\r\nconst int MX = 100001; \r\n \r\n// void solve() {\r\n//     ll n; cin >> n;\r\n//     vl a(n); F0R(i,n) cin >> a[i];\r\n//     ll l = 0, r = 0;\r\n//     ll ans = 0;\r\n//     while(true){\r\n//         while(a[l-1] == a[l] && l>0) l--;\r\n//         while(a[r + 1] == a[r]){\r\n//             r++;\r\n//             if( r == n - 1){\r\n//                 goto bb;\r\n//             }\r\n//         }\r\n//         cout << l << ' ' << r << nl;\r\n//         ll cur = l - r + 1;\r\n//         ans = max(ans, cur);\r\n//         ll save = r;\r\n//         if(r == n -1 ) break;\r\n//         if(a[l-1] != a[r + 1] || (l == 0) || (r == n - 1)){\r\n//             l = save + 1;\r\n//             r = l;\r\n//             continue;\r\n//         }\r\n//         while((a[l - 1] == a[r + 1] )&& (l > 0) && (r + 1 < n)){\r\n//             l--; r++;\r\n//             cur+=2;\r\n//         }\r\n//         cout << l << ' ' << r << nl;\r\n//         cout << nl;\r\n//         l = save + 1;\r\n//         r = l;\r\n//         ans = max(ans, cur);\r\n//     }\r\n//     bb :\r\n//     cout << ans << nl;\r\n// }\r\n\r\n// void solve(){\r\n//     ll n; cin >> n;\r\n//     map<ll,ll> start;\r\n//     map<ll,ll> end;\r\n//     map<ll,ll> freq;\r\n//     vector<vector<ll>> p(26, vector<ll>(n + 1, 0));\r\n//     for(int i = 0; i < n; i++){\r\n//         int x; cin >> x; x--;\r\n//         for(int j = 0; j < 26; j++){\r\n//             p[j][i + 1] = p[j][i] + (x == j);\r\n//         }\r\n//         if(start.find(x)==start.end()){\r\n//             start[x] = i;\r\n//         }\r\n//         end[x] = i;\r\n//         freq[x]++;\r\n//     }\r\n//     ll ans = -1;\r\n//     for(int i = 0; i < 26; i++){\r\n//         ll cur = freq[x];\r\n        \r\n//     }\r\n// }\r\n\r\nvoid solve(){\r\n    ll n; cin >> n;\r\n    vl a(n);\r\n    map<ll,ll> freq;\r\n    vector<vl> pos(26);\r\n    for(int i = 0; i < n; i++){\r\n        cin >> a[i];\r\n        a[i]--;\r\n        pos[a[i]].push_back(i);\r\n        freq[a[i]]++;\r\n    }\r\n    vector<vl> p(n + 1, vector<ll> (26)), s(n + 1, vector<ll> (26));\r\n    for(int i = 0; i < n; i++){\r\n        for(int j = 0; j < 26; j++){\r\n            p[i + 1][j] = p[i][j] + (a[i] == j);\r\n        }\r\n    }\r\n    for(int i = n - 1; i >=0; i--){\r\n        for(int j = 0; j < 26; j++){\r\n            s[i][j] = s[i + 1][j] + (a[i] == j);\r\n        }\r\n    }\r\n    ll mx = -1;\r\n    // for(int i = 0; i < n; i++){\r\n    //     for(int j = 0; j < 26; j++){\r\n    //         ll temp = freq[a[i]];\r\n    //         if(a[i] != j){\r\n    //         //    temp += 2*min(p[i][j], s[i+1][j]);\r\n    //         }\r\n    //         ckmax(mx, temp);\r\n    //         // if(ckmax(mx, temp)){\r\n    //         //     ;\r\n    //         //     // cout << i << ' ' << j << nl;\r\n    //         //     // cout << freq[a[i]] << ' ' << p[i][j] << ' ' << s[i + 1][j] << nl;\r\n    //         //     // cout << mx << nl;\r\n    //         // }\r\n    //     }\r\n    // }\r\n    for(int i = 0; i < 26; i++){\r\n        ll k = pos[i].size();\r\n        for(int j = 0; j < k; j++){\r\n            for(int l = j; l < k; l++){\r\n                for(int ch = 0; ch < 26; ch++){\r\n                    ll temp = l - j + 1;\r\n                    if(ch != i){\r\n                        temp += 2*min(p[pos[i][j]][ch], s[pos[i][l] + 1][ch]);\r\n                    }\r\n                    // if(i == 1){\r\n                    //     cout << temp << nl;\r\n                    //     cout << i << ' ' << ch << nl;\r\n                    //     cout << pos[i][j] << ' ' << pos[i][l] << nl;\r\n                    //     cout << p[pos[i][j]][ch] << ' ' << s[pos[i][l] + 1][ch] << nl;\r\n                    // }\r\n                    // if(ckmax(mx, temp)){\r\n                    //     cout << mx << nl;\r\n                    //     cout << i << ' ' << ch << nl;\r\n                    //     cout << pos[i][j] << ' ' << pos[i][l] << nl;\r\n                    // }\r\n                    ckmax(mx, temp);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    //cout << p[]\r\n    cout << mx << nl;\r\n   \r\n}\r\n \r\nint main() {\r\n    ios_base::sync_with_stdio(0); cin.tie(0);\r\n \r\n    int T = 1;\r\n    cin >> T;\r\n    while(T--) {\r\n        solve();\r\n    }\r\n \r\nreturn 0;\r\n}"
}